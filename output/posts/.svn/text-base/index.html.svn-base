<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-type' />
    <meta name='author' />
    <meta content='i/cbJtXe1ZDIZNta65CghwcRM/zFMRHIsbR9poU+uwU=' name='verify-v1' />
    <title>t.pitale blog</title>
    <link href='/favicon.ico' rel='shortcut icon' />
    <!-- Site CSS -->
    <link href='/css/base.css' media='screen, projection' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div id='header'>
      <div class='wrap'>
        <div class='col'>
          <a href='/'>
            <img src='/images/logo.png' />
          </a>
        </div>
        <div class='block'>
          <ul>
            <li>
              <a href="/#about">About</a>
            </li>
            <li>
              <a href="/#contact">Contact</a>
            </li>
            <li>
              <a href="/#blog">Blog</a>
            </li>
            <li>
              <a href="/#portfolio">Portfolio</a>
            </li>
            <li>
              <a href="/#links">Links</a>
            </li>
            <li>
              <a href="/#photos">Photos</a>
            </li>
          </ul>
        </div>
        <br class='clearleft' />
      </div>
    </div>
    <div id='content'>
      <div id='blog'>
        <div class='wrap'>
          <div class='col'>
            <h1>
              Blog
            </h1>
          </div>
          <div class='block'>
            <div id='post'>
              <h1>Legacy Databases with DataMapper</h1>
              <h2>Something Old, Something New</h2>
              <span class='date'>2008-03-18</span>
              <p>
                In my previous post I discussed my eventual discovery that
                <a href="http://rubyonrails.org">Ruby on Rails</a>
                would not work for a new project I had begun. Thankfully, I was at the very
                beginning of my work on said project and making a transition to a new path
                was not the end of the world.
              </p>
              <p>
                As I mentioned, a helpful suggestion led me to investigate
                <a href="http://merbivore.com">Merb</a>
                as a potential framework. Merb has the benefit of letting me use any of
                three possible database ORMs. ActiveRecord is supported, as well as,
                <a href="http://datamapper.org/">DataMapper</a>
                and Sequel. Obviously, ActiveRecord did not work for me and so, I looked at
                both DataMapper and Sequel. I found DataMapper to be more usable out of the
                box and so I moved ahead using it. Sequel would have been another excellent
                alternative but, I had to pick one and continue with my work.
              </p>
              <p>
                How did DataMapper solve my legacy database issues, you may ask. The answer
                is that DataMapper provides all the same standard solutions that
                ActiveRecord does but, it allows for keys to be text or any other type as
                long as they are unique and not null. The sql requirements for a primary
                key state that it must be unique and not null, there is no requirement for
                type. There was one little issue with DataMapper in which the text fields
                were being ignored because, in DataMapper, text fields are lazy. These
                fields will not be loaded until they are requested by an application. This
                led to a number of issues but, because DataMapper is so very easy to
                contribute to, I was able to make the necessary changes with much
                appreciation from the community.
              </p>
              <p>
                In terms of conventions, DataMapper has another nifty trick up its sleeve.
                In DataMapper, when defining a column, you may use a different name for the
                property and later define the actual column name from the database. I was
                extremely enthused to find that I could change names from the database from
                <code>wc_shlfprce</code>
                to something like:
                <code>warm_case_shelf_price.</code>
                Though it was a longer name, in terms of legibility the latter is an
                infinite improvement.
              </p>
              <p>
                And so, I work on, with Merb and DataMapper as my preferred tools, at least
                for this particular project. Aside from this flexibility, DataMapper would
                normally adhere to the same specific conventions for a database as does
                ActiveRecord. Any new converts from Rails will likely feel right at home.
              </p>
            </div>
            <div id='post'>
              <h1>Imaginary Mac Dock</h1>
              <h2>If You Must, You Must</h2>
              <span class='date'>2008-03-18</span>
              <p>
                Some people like to come home and "dock" their laptops to a desktop-type
                setup. There is no such thing for a Mac, not in the way that the Dell users
                of the world might imagine it. However, there are two ways to accomplish
                the same features. The first involves another Mac, the second does not.
              </p>
              <p>
                The first, and conceptually more complicated method relies upon two
                features that Macs have had as long as I can remember using them. Upon
                booting, a Mac (laptop or desktop) can act as an external hard drive case
                for the drive inside. Simply holding down T will start this mode. Now, we
                can plug this Mac into another and use this hard drive as the boot drive.
                Simply hold down the Option key when booting the "base", desktop Mac. The
                desktop will boot the hard drive in the laptop. If you have an Intel Mac,
                the computers can be connected with a USB cable or a Firewire cable. If you
                are using a PowerPC Mac, a Firewire cable must be used.
              </p>
              <p>
                The second method is far more simplistic. Apple (and many other companies)
                offer bluetooth keyboards and mice. Simply plug in an external monitor and
                use the bluetooth built into most Macs for the keyboard and mouse. With one
                physical cable you have essentially the same setup as all those "dock"
                users.
              </p>
              <p>
                There are many reasons why a user might wish to do this but, the most
                obvious reasoning includes a larger screen on a monitor, a full-sized
                keyboard, and a more functional mouse (though I prefer the touchpad for
                scrolling).
              </p>
            </div>
            <div id='post'>
              <h1>Legacy Databases with ActiveRecord</h1>
              <h2>So Close, But Yet, So Far</h2>
              <span class='date'>2008-03-17</span>
              <p>
                I loved working with Ruby on Rails, I still do. I bought books, I read
                blogs, and I made a fair few sites (both personal and for clients). I
                thought Ruby on Rails was the be-all, end-all for web development. I was
                very wrong.
              </p>
              <p>
                Ruby on Rails is fantastic. Especially when you create a new application
                and design and create that web application with Rails, and its way, in
                mind. However, if, like myself, you have to work with the database from
                an application that originated nearly 20 years ago, you may hit some snags.
                Just as I did.
              </p>
              <p>
                The design of a database to be used with Ruby on Rails (specifically
                ActiveRecord) must adhere to some very stringent "best" practices. These
                are not always the absolute, best practices in design but, they provide
                some fairly standard basic practices. One such example, though fairly
                advanced comes with polymorphic associations. In defining the type in one
                such association, ActiveRecord uses the class name of the type instead of
                a secondary table listing all possible types. This breaks any possible use
                of a foreign-key constraint.
              </p>
              <p>
                Some basics in Ruby on Rails database design, which is often generated
                without any specification from the developer (when using model generators),
                include: tables are named the pluralized class name (e.g. User becomes
                users), every table has an "id" field that is an auto-incremented integer,
                and a foreign-key is tablename_id.
              </p>
              <p>
                What must we do if we are using an existing database, and it does not
                comply to these standards? I'll go through each instance of non-standard
                database design from the existing database and show how ActiveRecord did
                or did not handle the problem.
              </p>
              <p>
                What to do if a Table is not Named after a Class? Easy. ActiveRecord
                provides a simple method
                <code>set_table_name</code>
                that allows you to do just that. If the tables are named after a class but
                are not pluralized, you can simply set the environment to not use the
                pluralized versions.
              </p>
              <p>
                What to do if a Table does not have Primary Key named 'id'? Easy, too.
                Simply use
                <code>set_primary_key</code>
                to set the primary key. This does not, however, provide for a case in which
                a table does not have a primary key (or otherwise usable unique key) in any
                way, shape, or form. The simple answer is to add an 'id' field that is not
                used by the legacy application. This is difficult or impossible to do if
                you are not the person in control of the database. It is also difficult if,
                like me, the database exists on hundreds of servers distributed around the
                country. Making any change in this case is not a simple undertaking.
              </p>
              <p>
                What to do if the Primary Key is not an auto-incremented integer field?
                Here, we find the most difficult problem of all. ActiveRecord can ignore
                the fact that you don't have auto-incremented values but, if your key is
                not an integer ActiveRecord (as of this posting) hits the proverbial wall.
                In the case of my legacy database, the primary keys were text fields, five
                digits in length. This was a carry-over from an even older system in which
                no relational database was involved.
              </p>
              <p>
                My only options here became extremely complicated and were only possible
                because I was using Postgresql (editable views). That was the end of the
                road for this project and Ruby on Rails. Thankfully, a helpful suggestion
                led me to use
                <a href="http://merbivore.com">Merb</a>
                for my framework and
                <a href="http://datamapper.org">DataMapper</a>
                for my database ORM. Watch for my next post in which I discuss the solutions
                to these problems, and a few nice perks, found in Merb and DataMapper.
              </p>
            </div>
            
            <div id='post'>
              <h1>Merb and DataMapper</h1>
              <h2>Initial Experience with Great Solutions</h2>
              <span class='date'>2008-03-12</span>
              <p>
                I started a new project using Ruby on Rails. Unfortunately, ActiveRecord
                is so stringent in its requirements for database design that the legacy
                database I was working with was unusable. I had to look elsewhere for
                my ruby framework because using the legacy database was a primary
                requirement. The existing application needs to continue operating for
                many years to come. It serves its users very well.
              </p>
              <p>
                I turned to Merb for my solution. Database ORM agnosticism was the order
                of the day. Merb does work with ActiveRecord but, since ActiveRecord did
                not work with me, I chose to use DataMapper. Sequel was another
                alternative. I prefer DataMapper (and merb, of course) for many reasons.
              </p>
              <p>
                The community surrounding Merb and DataMapper is excellent. Many of the
                people that work on one project, work on the other. I began perusing the
                Google groups for each project. I checked out their Rubyforge pages. I
                read their websites and documentation. Most importantly, I participated
                in conversations on irc chat (irc.freenode.net, #merb and #datamapper).
                Then, I took the dive and it has been amazingly to easy to make the
                switch from Rails to Merb and DataMapper.
              </p>
              <p>
                When I did happen to find something I wanted to change, a bug I wanted
                to fix, or brand new feature I wanted to add, the process was cake. The
                codebase is clean and well spec'd. In addition, both teams have well
                defined guidelines and processes for contributing to the project. If you
                are ever unable to find the answer to some question the IRC channels are
                always full of the core members of the team along with many other very
                experienced users. The IRC resource has been invaluable to me and since,
                I hope I've been able to help a few new users myself.
              </p>
              <p>
                In terms of features both Merb and DataMapper are slightly behind the
                features of Rails (and the many, many plugins) but, all of the core
                requirements are there. Not only are the features in the core, they are
                much better than the equivalent features in Rails. For example, you can
                forget about ever having to write responds_to in every action you have
                ever again. Merb has a method, provides, which defines the this behavior.
              </p>
              <p>
                My favorite feature in DataMapper, especially useful when working with a
                legacy database, is the capability to rename a column for use in your own
                model. For example, if the column in your database is named 'itm_mup' and
                you would prefer it be called 'item_markup' in your application.
              </p>
              <p>
                Not only does Merb allow you to use one of the three most popular ORM's,
                it allows you to use RSpec for testing, as well as, any javascript
                library you would like. Adding to this flexibility, Merb brings back a
                feature that was destroyed by Rails: lightweight components. Merb refers
                to these as "parts". Parts are called on by views to render extremely
                modular subsets of functionality.
              </p>
              <p>
                All in all, any deficiencies are more than made up for by the community,
                the codebase and ease of contribution, and the features of both Merb and
                DataMapper.
              </p>
            </div>
            <div id='post'>
              <h1>Vision Online, Now Focus</h1>
              <h2>
                The exciting tale of a Merb Application and branding
              </h2>
              <span class='date'>2008-03-11</span>
              <p>
                I have spent my free time, nights and weekends, working to create a new
                version of Vision, online. For those that do not know, Vision is the
                peerless, just-in-time, inventory control and point of sale system for the
                retail liquor market.
              </p>
              <p>
                The project was originally titled Vision Online. That name is simple and
                it works with all of the branding that ICS has already done. However, this
                product heads out on its own and addresses a slightly new market. As such,
                a new name was a must.
              </p>
              <p>
                Thanks to a stroke of genius by my associate Chris, we've switched to the
                name Focus. The name is brilliant for three, important reasons. First,
                the original product is named Vision and Focus is just that, a focusing of
                the features and benefits of using Vision. Second, the use of this
                product is intended to focus the users' inventory until it is as close as
                possible to just-in-time. Lastly, a function of a person's literal vision
                is the ability to focus. We are hoping that this reincarnation of Vision
                will enable a user to focus on getting their inventory inline.
              </p>
              <p>
                Solidifying this branding was important for me, as a developer, because it
                provides a northern star, a guiding light, to my goal. The meaning that
                branding holds for a user is realized many times over, for me. It is an
                important aspect of development, keeping the goals, ideals, and vision of
                the product, in mind.
              </p>
            </div>
            <div id='post'>
              <h1>Slicehost</h1>
              <h2>Getting it Right, Right Away</h2>
              <span class='date'>2008-03-14</span>
              <p>
                At the recommendation of Patrick Reagan of Viget Labs I signed up for an
                account with Slicehost. With a simple form for signup, I was quickly
                filling in my credit card number. Before my credit card had been validated
                by Slicehost, my slice was up and running.
              </p>
              <p>
                I was not planning at the time to set up, or modify my new server. The draw
                of the root password that had just been emailed to me overpowered any such
                plans. I quickly discovered the fantastic tools made available by Slicehost
                for the user. Within 2 minutes I had configured my DNS and within 5 minutes
                I had compiled and installed Nginx, all thanks to the excellent help site.
              </p>
              <p>
                Upon completing the initial "release" of this website the following
                morning, I was completely up and running and I switched my TLD registration
                to the Slicehost DNS hosts. If you do sign up for a Slicehost account I
                would certainly appreciate a
                <a href="https://manage.slicehost.com/customers/new?referrer=972292314">referral.</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type='text/javascript'>
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type='text/javascript'>
      var pageTracker = _gat._getTracker("UA-3879168-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
    <script src='/javascripts/jquery.js' type='text/javascript'>
    </script>
    <script src='/javascripts/jquery.scrollTo.js' type='text/javascript'>
    </script>
    <script src='/javascripts/jquery.localscroll.js' type='text/javascript'>
    </script>
    <script type='text/javascript'>
      $(document).ready(function(){$("#header").localScroll();});
    </script>
  </body>
</html>
